- hosts: local
  user: cloud
  sudo: yes

  tasks:
    - name: gocd repository is present
      apt_repository:
        repo="deb http://dl.bintray.com/gocd/gocd-deb /"
        state=present
        
    - name: apt cache is up-to-date
      apt:
        update_cache=yes
        cache_valid_time=3600
        
    - name: go server and agent
      apt:
        pkg="{{ item }}"
        state=present
      with_items:
        - go-server
        - go-agent
